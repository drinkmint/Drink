#include<stdio.h>
int main()
{
	int a[100] = { 0 }, b[100] = { 0 }, max1=0, n = 0,d=1000,max2=0,i,max3;
	char q; 
	printf("请输入两个多项式(最高幂次<100).\n");
	printf("请输入第1个多项式(输入字母x结束).\n");
	printf("幂次:");
	while(scanf("%d", &n)!=EOF)
	{
        if(n==d)
        break;
		printf("系数:");
		scanf("%d", &a[n]);
		printf("幂次:");
        d=n;
        if(max1<n)
        max1=n;
    }
    getchar();
   	printf("请输入第2个多项式(输入字母x结束).\n");
	printf("幂次:");
	d=1000;
	n=0;
	while(scanf("%d", &n)!=EOF)
	{
        if(n==d)
        break;
		printf("系数:");
		scanf("%d", &b[n]);
		printf("幂次:");
        d=n;
        if(max2<n)
        max2=n;
    }

	printf("(");
	if(max1>1){
	
	printf("%dx^%d",a[max1],max1);
	for(i=max1-1;i>=2;i--)
	{
		if(a[i]>1)
		{
			printf("+%dx^%d",a[i],i);
		}
				if(a[i]==1)
		{
			printf("+x^%d",i);
		}
	}
}
		if(max1>1){
		
    if(a[1]>1)
    	printf("+%dx",a[1]);
    else if(a[1]==1)
        printf("+x");
    if(a[0]>=1)
    	printf("+%d",a[0]);

    }
    else if(max1==1)
    {
    	   if(a[1]>1)
    	printf("%dx",a[1]);
    else if(a[1]==1)
        printf("x");
    if(a[0]>=1)
    	printf("+%d",a[0]);

	}
	    else if(max1==0)
    {
    if(a[0]>=1)
    	printf("%d",a[0]);

	}
	    	printf(")+(");
    		if(max2>1){
			
   	printf("%dx^%d",b[max2],max2);
	for(i=max2-1;i>=2;i--)
	{
		if(b[i]>1)
		{
			printf("+%dx^%d",b[i],i);
		}
				if(b[i]==1)
		{
			printf("+x^%d",i);
		}
	}
		if(max2>1){
		
    if(b[1]>1)
    	printf("+%dx",b[1]);
    else if(b[1]==1)
        printf("+x");
    if(b[0]>=1)
    	printf("+%d",b[0]);

    }
}
    else if(max2==1)
    {
    	   if(b[1]>1)
    	printf("%dx",b[1]);
    else if(b[1]==1)
        printf("x");
    if(b[0]>=1)
    	printf("+%d",b[0]);

	}
	    else if(max1==0)
    {
    if(b[0]>=1)
    	printf("%d",b[0]);

	}
    printf(")=(");
    if(max1>max2)
    max3=max1;
    else
    max3=max2;
    	if(max3>1)
    	{
    		
		
   	printf("%dx^%d",a[max3]+b[max3],max3);
	for(i=max3-1;i>=2;i--)
	{
		if((a[i]+b[i])>0)
		{
			printf("+%dx^%d",a[i]+b[i],i);
		}
				if((a[i]+b[i])>0)
		{
			printf("+x^%d",i);
		}
	}
		if(max3>1){
		
    if((a[1]+b[1])>1)
    	printf("+%dx",(a[1]+b[1]));
    else if((a[1]+b[1])==1)
        printf("+x");
    if((a[0]+b[0])>=1)
    	printf("+%d",(a[0]+b[0]));

    }
}
    else if(max3==1)
    {
    	   if((a[1]+b[1])>1)
    	printf("%dx",(a[1]+b[1]));
    else if((a[1]+b[1])==1)
        printf("x");
    if((a[0]+b[0])>=1)
    	printf("+%d",(a[0]+b[0]));
	}
	    else if(max3==0)
    {
    if((a[0]+b[0])>=1)
    	printf("%d",(a[0]+b[0]));
	}
    	printf(")");
	return 0;
}
